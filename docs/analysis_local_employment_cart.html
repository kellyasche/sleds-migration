<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Analysis - local employment CART</title>

<script src="site_libs/header-attrs-2.22/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.0/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.0/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#section-TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#section-TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="section-TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">CTE impacts on migration trends in SW Minnesota</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Summary of results</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-gear"></span>
     
    Data prep and summaries
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="k12enrollment.html">K12Enrollment</a>
    </li>
    <li>
      <a href="k12orgs.html">K12Orgs</a>
    </li>
    <li>
      <a href="act.html">ACT</a>
    </li>
    <li>
      <a href="ap.html">AP</a>
    </li>
    <li>
      <a href="cteenrollment.html">CTEEnrollment</a>
    </li>
    <li>
      <a href="ctedemographics.html">CTEDemographics</a>
    </li>
    <li>
      <a href="cteintensity.html">CTEIntensity</a>
    </li>
    <li>
      <a href="assessments.html">Assessments</a>
    </li>
    <li>
      <a href="sat.html">SAT</a>
    </li>
    <li>
      <a href="nscenrollment.html">National Student Clearinghouse - enrollment</a>
    </li>
    <li>
      <a href="nsccompletions.html">National Student Clearinghouse - completions</a>
    </li>
    <li>
      <a href="employment.html">Employment</a>
    </li>
    <li>
      <a href="unemployment.html">Unemployment</a>
    </li>
    <li>
      <a href="avgwages.html">Average wages</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-gear"></span>
     
    Analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="analysis_multiple_correspondence.html">Analysis - multiple correspondence analysis</a>
    </li>
    <li>
      <a href="analysis_local_employment_ct.html">Local employment cross tabs</a>
    </li>
    <li>
      <a href="visualizations_local_employment_ct.html">Visualizations - cross tabs</a>
    </li>
    <li>
      <a href="analysis_local_employment_cart.html">Local employment CART analysis</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="section-header">



<h1 class="title toc-ignore">Analysis - local employment CART</h1>

</div>


<p><br></p>
<p>We will use a tree-based method for classification - CART analysis.
This type of analysis involves stratifying and/or segmenting the
predictor space into a number of simple regions. Essentially, it’s
another way to see which independent variables play a role in if an
individual has meaningful employment in the local region X. We will be
using the independent variables that were identified as being important
in the multiple correspondence analysis.</p>
<p>There are three “times” in which we checked to see if the individual
had meaningful employment within these geographies;</p>
<ol style="list-style-type: decimal">
<li>the same year as graduation</li>
<li>two years after graduation, and</li>
<li>seven years after graduation.</li>
</ol>
<p>Meaningful employment is determined by whether an individual worked
1,000 hours for an employer during time X. In addition, if the
individual worked 1,000 hours for that employer during another year, but
not for that exact “time X” year, it’s still considered
“meaningful”.</p>
<p>Due to time x potentially being passed the date of the latest data
(2019) for some individuals, the analysis below will filter out all
individuals where time x is after 2019.</p>
<p>The primary independent variables that the cross tables indicated as
important are;</p>
<pre><code>## $RaceEthnicity
## [1] &quot;factor&quot;
## 
## $Dem_Desc
## [1] &quot;factor&quot;
## 
## $edr
## [1] &quot;factor&quot;
## 
## $avg.wages.pct.state
## [1] &quot;numeric&quot;
## 
## $LimitedEnglishProficiencyIndicator
## [1] &quot;factor&quot;
## 
## $pseo.participant
## [1] &quot;factor&quot;
## 
## $non.english.home
## [1] &quot;factor&quot;
## 
## $english.learner
## [1] &quot;factor&quot;
## 
## $took.ACT
## [1] &quot;factor&quot;
## 
## $ap.exam
## [1] &quot;factor&quot;
## 
## $total.cte.courses.taken
## [1] &quot;numeric&quot;
## 
## $cte.achievement
## [1] &quot;factor&quot;
## 
## $MCA.M
## [1] &quot;numeric&quot;
## 
## $MCA.R
## [1] &quot;numeric&quot;
## 
## $MCA.S
## [1] &quot;numeric&quot;
## 
## $ps.grad
## [1] &quot;factor&quot;
## 
## $attended.ps
## [1] &quot;factor&quot;
## 
## $ps.grad.InstitutionSector
## [1] &quot;factor&quot;
## 
## $highest.cred.level
## [1] &quot;factor&quot;</code></pre>
<p>However, there are plenty of variables here that are VERY similar.
For example, whether an individual graduated from a post-secondary
institution and the type of institution they graduated from. So let’s
simplify the variables to what is most important and has the least
amount of overlap with other variables.</p>
<ul>
<li>Demographic
<ul>
<li>RaceEthnicity</li>
</ul></li>
<li>High school characteristics
<ul>
<li>Dem_Desc</li>
<li>EDR</li>
<li>avg.wages.pct.state</li>
</ul></li>
<li>High school enrollment
<ul>
<li>LimitedEnglishProficiencyIndicator</li>
<li>PSEO.participant</li>
</ul></li>
<li>High school accomplishments
<ul>
<li>took.act</li>
<li>ap.exam</li>
<li>cte.achievement</li>
<li>MCA.M</li>
<li>MCA.R</li>
<li>MCA.S</li>
</ul></li>
<li>Post-secondary
<ul>
<li>ps.grad.InstitutionSector</li>
<li>highest.cred.level</li>
</ul></li>
</ul>
<p>We eliminated the following variables for now;</p>
<ul>
<li>non.english.home</li>
<li>english.learner</li>
<li>total.cte.courses.taken</li>
<li>ps.grad</li>
<li>attended.ps</li>
</ul>
<p>In addition to eliminating those variables, we will also simplify the
ps.grad.InstitutionSector to the following codes;</p>
<ul>
<li>1 = graduated from the following insitutions
<ul>
<li>Public, 4-year (1)</li>
<li>Private, not for profit 4-year (2)</li>
<li>Private, for profit 4-year (3)</li>
</ul></li>
<li>2 = graduated from the following institutions
<ul>
<li>Private, not for profit 2-year (5, 11)</li>
<li>Private, for profit 2-year (6, 11)</li>
<li>Public, less than 2-year (7, 11)</li>
<li>Private, not for profit less than 2-year (8, 11)</li>
<li>Private for-profit, less-than 2-year (9, 11)</li>
</ul></li>
<li>3 = graduated from multiple institution sectors (10)</li>
<li>4 = graduated from a public, 2-year institution (4,4)</li>
<li>5 = Did not graduate or attend a post-secondary institution</li>
</ul>
<p><br></p>
<div id="section-steps-in-analysis" class="section level1">
<h1>Steps in analysis</h1>
<p>Our dependent variable - the individual has meaningful employment in
same location X as their high school - has 4 different outcomes.</p>
<ol style="list-style-type: decimal">
<li>Location match: the individual has
<ul>
<li>a MN employment record at time X</li>
<li>has meaningful employment at time X</li>
<li>is employed in the same location X as their high school.</li>
</ul></li>
<li>No location match: the individual has
<ul>
<li>a MN employment record at time X</li>
<li>has meaningful employment at time X</li>
<li>does NOT have employment in the same location X as their high
school.</li>
</ul></li>
<li>No meaningful emp: the individual has
<ul>
<li>a MN employment record at time X</li>
<li>the employment is not meaningful at time X.</li>
</ul></li>
<li>No MN emp record: the individual has
<ul>
<li>NO MN employment record at time X.</li>
</ul></li>
</ol>
<p>Since we are most interested in whether an individual has meaningful
employment in region X at time X we will create two groups; 1. all
individuals that meet the criteria/outcome 1 from list above, and 2. all
remaining individuals.</p>
<p>For each time X we will analyze whether the independent variables are
good at predicting whether an individual has a MN employment record AND
has meaningful employment AND the meaningful employment is in the same
region X as their high school.</p>
<p><br></p>
</div>
<div id="section-analysis---time-x-grad-year-0" class="section level1">
<h1>Analysis - time X = grad year +0</h1>
<div id="section-county-meaningful-employment" class="section level2">
<h2>County meaningful employment</h2>
<p>This is an overly complex tree.</p>
<p><br></p>
<pre class="r"><code>model &lt;- rpart(hs.grad.year.county.match ~ ., data = master.grad.year.county.path, method = &quot;class&quot;, cp = .000252)

model</code></pre>
<pre><code>## n= 38050 
## 
## node), split, n, loss, yval, (yprob)
##       * denotes terminal node
## 
##     1) root 38050 4720 No match (0.12404731 0.87595269)  
##       2) highest.cred.level=Associate degree,Less than Associate Degree 28501 4223 No match (0.14817024 0.85182976)  
##         4) took.ACT=No 12126 2156 No match (0.17779977 0.82220023)  
##           8) cte.achievement=CTE Concentrator or Completor,CTE Participant 9575 1846 No match (0.19279373 0.80720627)  
##            16) avg.wages.pct.state&gt;=0.7000086 4896 1070 No match (0.21854575 0.78145425)  
##              32) avg.wages.pct.state&lt; 0.7123319 1544  402 No match (0.26036269 0.73963731)  
##                64) edr=EDR 6E- Southwest Central 873  261 No match (0.29896907 0.70103093)  
##                 128) Dem_Desc=Town/rural mix 799  253 No match (0.31664581 0.68335419)  
##                   256) cte.achievement=CTE Concentrator or Completor 523  180 No match (0.34416826 0.65583174)  
##                     512) avg.wages.pct.state&lt; 0.7053184 240   98 No match (0.40833333 0.59166667)  
##                      1024) MCA.R&lt; 3.5 219   93 No match (0.42465753 0.57534247)  
##                        2048) ps.grad.InstitutionSector&lt; 4.5 54   26 Match (0.51851852 0.48148148)  
##                          4096) RaceEthnicity=Hispanic 8    2 Match (0.75000000 0.25000000) *
##                          4097) RaceEthnicity=Black,White 46   22 No match (0.47826087 0.52173913)  
##                            8194) pseo.participant=1 8    2 Match (0.75000000 0.25000000) *
##                            8195) pseo.participant=0 38   16 No match (0.42105263 0.57894737)  
##                             16390) MCA.R&gt;=2.5 18    7 Match (0.61111111 0.38888889) *
##                             16391) MCA.R&lt; 2.5 20    5 No match (0.25000000 0.75000000) *
##                        2049) ps.grad.InstitutionSector&gt;=4.5 165   65 No match (0.39393939 0.60606061)  
##                          4098) avg.wages.pct.state&lt; 0.7025719 53   25 No match (0.47169811 0.52830189)  
##                            8196) MCA.M&lt; 1.5 33   16 Match (0.51515152 0.48484848)  
##                             16392) RaceEthnicity=Black,Hispanic 10    4 Match (0.60000000 0.40000000) *
##                             16393) RaceEthnicity=White 23   11 No match (0.47826087 0.52173913)  
##                               32786) MCA.R&gt;=1.5 8    2 Match (0.75000000 0.25000000) *
##                               32787) MCA.R&lt; 1.5 15    5 No match (0.33333333 0.66666667) *
##                            8197) MCA.M&gt;=1.5 20    8 No match (0.40000000 0.60000000) *
##                          4099) avg.wages.pct.state&gt;=0.7025719 112   40 No match (0.35714286 0.64285714)  
##                            8198) MCA.S&gt;=2.5 16    7 Match (0.56250000 0.43750000) *
##                            8199) MCA.S&lt; 2.5 96   31 No match (0.32291667 0.67708333) *
##                      1025) MCA.R&gt;=3.5 21    5 No match (0.23809524 0.76190476) *
##                     513) avg.wages.pct.state&gt;=0.7053184 283   82 No match (0.28975265 0.71024735) *
##                   257) cte.achievement=CTE Participant 276   73 No match (0.26449275 0.73550725)  
##                     514) avg.wages.pct.state&gt;=0.7077928 35   17 No match (0.48571429 0.51428571)  
##                      1028) RaceEthnicity=Asian/PI,Black 18    6 Match (0.66666667 0.33333333) *
##                      1029) RaceEthnicity=Hispanic,Unknown,White 17    5 No match (0.29411765 0.70588235) *
##                     515) avg.wages.pct.state&lt; 0.7077928 241   56 No match (0.23236515 0.76763485) *
##                 129) Dem_Desc=Entirely rural 74    8 No match (0.10810811 0.89189189) *
##                65) edr=EDR 6W- Upper Minnesota Valley,EDR 8 - Southwest 671  141 No match (0.21013413 0.78986587) *
##              33) avg.wages.pct.state&gt;=0.7123319 3352  668 No match (0.19928401 0.80071599) *
##            17) avg.wages.pct.state&lt; 0.7000086 4679  776 No match (0.16584740 0.83415260)  
##              34) avg.wages.pct.state&gt;=0.6487133 3493  628 No match (0.17978815 0.82021185)  
##                68) avg.wages.pct.state&lt; 0.6752799 1463  316 No match (0.21599453 0.78400547)  
##                 136) edr=EDR 6E- Southwest Central 93   32 No match (0.34408602 0.65591398)  
##                   272) MCA.M&lt; 1.5 50   22 No match (0.44000000 0.56000000)  
##                     544) MCA.R&gt;=2.5 13    3 Match (0.76923077 0.23076923) *
##                     545) MCA.R&lt; 2.5 37   12 No match (0.32432432 0.67567568) *
##                   273) MCA.M&gt;=1.5 43   10 No match (0.23255814 0.76744186) *
##                 137) edr=EDR 6W- Upper Minnesota Valley,EDR 8 - Southwest 1370  284 No match (0.20729927 0.79270073) *
##                69) avg.wages.pct.state&gt;=0.6752799 2030  312 No match (0.15369458 0.84630542) *
##              35) avg.wages.pct.state&lt; 0.6487133 1186  148 No match (0.12478921 0.87521079)  
##                70) RaceEthnicity=AI,Black,White 1092  147 No match (0.13461538 0.86538462)  
##                 140) Dem_Desc=Town/rural mix 392   70 No match (0.17857143 0.82142857)  
##                   280) avg.wages.pct.state&lt; 0.6002872 69   25 No match (0.36231884 0.63768116)  
##                     560) cte.achievement=CTE Concentrator or Completor 33   15 No match (0.45454545 0.54545455)  
##                      1120) MCA.R&lt; 2.5 24    9 Match (0.62500000 0.37500000) *
##                      1121) MCA.R&gt;=2.5 9    0 No match (0.00000000 1.00000000) *
##                     561) cte.achievement=CTE Participant 36   10 No match (0.27777778 0.72222222) *
##                   281) avg.wages.pct.state&gt;=0.6002872 323   45 No match (0.13931889 0.86068111) *
##                 141) Dem_Desc=Entirely rural 700   77 No match (0.11000000 0.89000000) *
##                71) RaceEthnicity=Asian/PI,Hispanic 94    1 No match (0.01063830 0.98936170) *
##           9) cte.achievement=No CTE 2551  310 No match (0.12152097 0.87847903) *
##         5) took.ACT=Yes 16375 2067 No match (0.12622901 0.87377099) *
##       3) highest.cred.level=Bachelor degree,Master degree or higher 9549  497 No match (0.05204733 0.94795267) *</code></pre>
<pre class="r"><code>rpart.plot(model)</code></pre>
<p><img src="analysis_local_employment_cart_files/figure-html/cart%20county%20emp%20grad%20year%20plus%20zero-1.png" width="672" /></p>
<p><br></p>
<p>Test dataset.</p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("section-TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#section-TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
